# AR校园导览项目开发指南

## 项目概述

本项目是一个AR/VR校园导览应用，提供校园导航、虚拟现实体验和问答论坛等功能。

## 已完成功能

### 1. 启动模块
- ✅ APP启动加载动画
- ✅ 应用功能介绍（3页轮播）
- ✅ 滑动/点击切换功能

### 2. 登录模块
- ✅ 首页访问拦截
- ✅ 账号密码登录
- ✅ 密码显示/隐藏切换
- ✅ 本地登录状态持久化

### 3. 首页模块
- ✅ 热门学校轮播图（自动+手动切换）
- ✅ 核心细分板块
- ✅ 全国学校分类内置AR/VR功能入口

### 4. 导航模块
- ✅ 顶部导航栏（logo+搜索框+暗夜模式切换按钮）
- ✅ 底部导航栏（首页、用户中心、论坛）
- ✅ 当前页面高亮

### 5. 主题切换
- ✅ 默认简约蓝白模式
- ✅ 暗夜模式一键切换
- ✅ 全页面样式同步适配

## 需要完成的任务

### 1. HTML文件修复

#### 转义错误修复
以下HTML文件存在onclick属性中的单引号未正确闭合问题，需要手动修复：

**index.html**
- 第227行：`window.location.href='ar-navigation.html?spot=gate'`
- 第228行：`window.location.href='vr-panorama.html?spot=gate'`
- 第237行：`window.location.href='ar-navigation.html?spot=building'`
- 第238行：`window.location.href='vr-panorama.html?spot=building'`
- 第247行：`window.location.href='ar-navigation.html?spot=library'`
- 第248行：`window.location.href='vr-panorama.html?spot=library'`

**school-category.html**
- 第14行：`window.location.href='index.html"`

**user-center.html**
- 第31行：`window.location.href='login.html"`
- 第64行：`window.location.href='my-questions.html"`
- 第73行：`window.location.href='my-answers.html"`
- 第82行：`window.location.href='my-favorites.html"`
- 第91行：`window.location.href='settings.html"`

**forum.html**
- 第23行：`window.location.href='forum-publish.html"`

#### 修复方法
将所有`window.location.href='xxx"`修改为`window.location.href='xxx'`

### 2. 资源文件整理

#### 需要下载的库文件
请在`assets/lib`目录中添加以下库文件：

1. **aframe.min.js** (v1.3.0)
   - 下载地址：https://aframe.io/releases/1.3.0/aframe.min.js
   - 用途：A-Frame库，用于构建VR/AR场景

2. **ar.js** (v3.4.5)
   - 下载地址：https://raw.githubusercontent.com/AR-js-org/AR.js/master/data/aframe-ar.js
   - 用途：AR.js库，用于实现AR功能

3. **jquery.min.js** (v3.6.0)
   - 下载地址：https://code.jquery.com/jquery-3.6.0.min.js
   - 用途：jQuery库，用于简化DOM操作

#### 需要添加的资源文件

1. **学校图片** (`assets/school/`)
   - peking.jpg (北京大学)
   - tsinghua.jpg (清华大学)
   - fudan.jpg (复旦大学)

2. **图标文件** (`assets/icon/`)
   - library.png (图书馆)
   - gym.png (体育馆)
   - dorm.png (宿舍区)
   - canteen.png (食堂)
   - teaching.png (教学楼)
   - gate.png (校门)
   - user-avatar.png (用户头像)
   - moon.png (暗夜模式图标)
   - sun.png (简约模式图标)

3. **全景图** (`assets/panorama/`)
   - gate.jpg (校门)
   - building.jpg (主教学楼)
   - library.jpg (图书馆)
   - gym.jpg (体育馆)
   - canteen.jpg (食堂)

4. **标记文件** (`assets/marker/`)
   - hiro.patt (Hiro标记)
   - building.patt (教学楼标记)
   - library.patt (图书馆标记)
   - gym.patt (体育馆标记)
   - canteen.patt (食堂标记)

### 3. 功能完善

#### 用户中心功能

**需要添加的页面**
1. **个人信息展示/编辑页面** (`my-profile.html`)
   - 显示用户名、头像
   - 编辑个人信息表单
   - 保存修改功能

2. **我的提问页面** (`my-questions.html`)
   - 显示用户发布的问题列表
   - 问题状态（已回答/未回答）
   - 删除问题功能

3. **我的回答页面** (`my-answers.html`)
   - 显示用户的回答列表
   - 回答获赞数
   - 删除回答功能

4. **我的收藏页面** (`my-favorites.html`)
   - 显示收藏的学校列表
   - 取消收藏功能

5. **设置页面** (`settings.html`)
   - 主题设置（默认主题选择）
   - 通知设置（消息推送开关）
   - 隐私设置（个人信息可见性）

#### AR/VR功能优化

**AR页面优化**
1. **ar-page.html**
   - 添加更多标记点支持
   - 优化标记检测性能
   - 添加语音导航功能

2. **ar-navigation.html**
   - 添加路线规划功能
   - 添加距离计算功能
   - 优化标记识别稳定性

3. **ar-navigation-simple.html**
   - 简化界面设计
   - 优化性能

**VR页面优化**
1. **vr-page.html**
   - 添加更多导航点
   - 优化全景图加载性能
   - 添加自动导览功能

2. **vr-panorama.html**
   - 添加热点信息展示
   - 优化切换动画

**3D页面优化**
1. **3d-page.html**
   - 优化模型加载性能
   - 添加交互提示
   - 优化渲染效果

### 4. 统一底部导航栏

**已完成**
- ✅ 创建了统一的底部导航栏组件（`components/footer-nav.html`）

**需要手动更新的页面**
由于技术限制，需要手动更新以下页面的底部导航栏，使用iframe引入统一组件：

1. **index.html**
   - 将第254-279行的底部导航栏替换为：
   ```html
   <!-- 底部导航栏 -->
   <!-- 引入统一的底部导航栏组件 -->
   <iframe src="./components/footer-nav.html" style="width: 100%; height: 64px; border: none;"></iframe>
   ```

2. **school-category.html**
   - 将第59-89行的底部导航栏替换为：
   ```html
   <!-- 底部导航栏 -->
   <!-- 引入统一的底部导航栏组件 -->
   <iframe src="./components/footer-nav.html" style="width: 100%; height: 64px; border: none;"></iframe>
   ```

3. **user-center.html**
   - 将第107-139行的底部导航栏替换为：
   ```html
   <!-- 底部导航栏 -->
   <!-- 引入统一的底部导航栏组件 -->
   <iframe src="./components/footer-nav.html" style="width: 100%; height: 64px; border: none;"></iframe>
   ```

4. **forum.html**
   - 将第49-81行的底部导航栏替换为：
   ```html
   <!-- 底部导航栏 -->
   <!-- 引入统一的底部导航栏组件 -->
   <iframe src="./components/footer-nav.html" style="width: 100%; height: 64px; border: none;"></iframe>
   ```

5. **forum-detail.html**
   - 将第49-81行的底部导航栏替换为：
   ```html
   <!-- 底部导航栏 -->
   <!-- 引入统一的底部导航栏组件 -->
   <iframe src="./components/footer-nav.html" style="width: 100%; height: 64px; border: none;"></iframe>
   ```

6. **forum-publish.html**
   - 将第70-102行的底部导航栏替换为：
   ```html
   <!-- 底部导航栏 -->
   <!-- 引入统一的底部导航栏组件 -->
   <iframe src="./components/footer-nav.html" style="width: 100%; height: 64px; border: none;"></iframe>
   ```

7. **school-detail.html**
   - 将第52-84行的底部导航栏替换为：
   ```html
   <!-- 底部导航栏 -->
   <!-- 引入统一的底部导航栏组件 -->
   <iframe src="./components/footer-nav.html" style="width: 100%; height: 64px; border: none;"></iframe>
   ```

**说明**
- 统一的底部导航栏组件已经创建，包含首页、学校、论坛、我的四个导航项
- 组件包含自动高亮当前页面的功能
- 组件支持主题切换，自动适配简约模式和暗夜模式
- 使用iframe引入可以避免在每个页面重复相同的HTML代码

### 5. 测试步骤

1. 修复所有HTML文件中的转义错误
2. 按项目结构摆放好所有文件（尤其是assets、components文件夹）
3. 用VS Code打开项目根目录（ar-campus-guide）
4. 安装VS Code插件「Live Server」
5. 右键点击splash.html → 「Open with Live Server」（用本地服务器打开，避免路径跨域问题）
6. 依次测试：
   - 启动页→登录→首页（看图片是否加载）
   - VR/AR页面（看地图是否加载，允许摄像头权限）
   - 用户中心功能（个人信息、提问、回答等）
   - 论坛功能（发布问题、查看回答等）

## 注意事项

1. 所有AR/VR页面需要使用本地服务器打开，避免跨域问题
2. 确保所有资源文件已正确放置在assets目录中
3. 测试时请允许浏览器访问摄像头权限
4. 建议使用Chrome浏览器进行测试
5. 移动端测试请使用Chrome DevTools的远程调试功能