<!-- 重新设计的底部导航栏组件 -->
<nav class="modern-footer-nav">
    <div class="nav-container">
        <a href="index.html" class="nav-item" data-page="index">
            <div class="nav-icon-wrapper">
                <svg class="nav-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path class="nav-icon-path" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                </svg>
            </div>
            <span class="nav-text">首页</span>
        </a>
        <a href="school-category.html" class="nav-item" data-page="school">
            <div class="nav-icon-wrapper">
                <svg class="nav-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path class="nav-icon-path" d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72l5 2.73 5-2.73v3.72z"/>
                </svg>
            </div>
            <span class="nav-text">学校</span>
        </a>
        <a href="forum.html" class="nav-item" data-page="forum">
            <div class="nav-icon-wrapper">
                <svg class="nav-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path class="nav-icon-path" d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"/>
                </svg>
            </div>
            <span class="nav-text">论坛</span>
        </a>
        <a href="user-center.html" class="nav-item" data-page="user">
            <div class="nav-icon-wrapper">
                <svg class="nav-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path class="nav-icon-path" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-1.79 4-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
            </div>
            <span class="nav-text">我的</span>
        </a>
    </div>
    <div class="nav-indicator"></div>
</nav>

<!-- 底部导航栏样式 -->
<style>
    :root {
        --nav-height: 60px;
        --nav-bg: rgba(255, 255, 255, 0.95);
        --nav-bg-dark: rgba(30, 30, 30, 0.95);
        --nav-text: #6B7280;
        --nav-text-active: #4A6DE5;
        --nav-bg-hover: rgba(74, 109, 229, 0.08);
        --nav-shadow: 0 -4px 24px rgba(0, 0, 0, 0.08);
        --nav-shadow-dark: 0 -4px 24px rgba(0, 0, 0, 0.2);
    }

    .modern-footer-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: var(--nav-height);
        background: var(--nav-bg);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        box-shadow: var(--nav-shadow);
        z-index: 1000;
        padding-bottom: env(safe-area-inset-bottom);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .nav-container {
        display: flex;
        justify-content: space-around;
        align-items: center;
        height: 100%;
        max-width: 1200px;
        margin: 0 auto;
    }

    .nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: var(--nav-text);
        text-decoration: none;
        width: 100%;
        height: 100%;
        padding: 8px 0;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        cursor: pointer;
    }

    .nav-icon-wrapper {
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        margin-bottom: 4px;
    }

    .nav-icon {
        width: 24px;
        height: 24px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .nav-icon-path {
        fill: currentColor;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .nav-text {
        font-size: 11px;
        font-weight: 500;
        letter-spacing: 0.3px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .nav-item:hover {
        color: var(--nav-text-active);
    }

    .nav-item:hover .nav-icon-wrapper {
        background: var(--nav-bg-hover);
        transform: translateY(-2px);
    }

    .nav-item.active {
        color: var(--nav-text-active);
    }

    .nav-item.active .nav-icon-wrapper {
        background: var(--nav-bg-hover);
        transform: translateY(-2px);
    }

    .nav-item:active {
        transform: scale(0.95);
    }

    .nav-indicator {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background: linear-gradient(90deg, var(--nav-text-active), transparent);
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    /* 暗夜模式适配 */
    .dark-theme .modern-footer-nav {
        background: var(--nav-bg-dark);
        box-shadow: var(--nav-shadow-dark);
    }

    .dark-theme .nav-item {
        color: #9CA3AF;
    }

    .dark-theme .nav-item:hover,
    .dark-theme .nav-item.active {
        color: #60A5FA;
    }

    .dark-theme .nav-item:hover .nav-icon-wrapper,
    .dark-theme .nav-item.active .nav-icon-wrapper {
        background: rgba(96, 165, 250, 0.15);
    }

    /* 响应式设计 */
    @media (max-width: 768px) {
        .modern-footer-nav {
            height: 56px;
        }

        .nav-icon-wrapper {
            width: 26px;
            height: 26px;
        }

        .nav-icon {
            width: 22px;
            height: 22px;
        }

        .nav-text {
            font-size: 10px;
        }
    }
</style>

<!-- 底部导航栏脚本 -->
<script>
    // 更新底部导航栏激活状态
    function updateFooterNav() {
        // 获取当前页面路径
        let currentPath = window.location.pathname;
        
        // 如果在iframe中，尝试获取父页面的路径
        if (window.parent !== window) {
            try {
                currentPath = window.parent.location.pathname.split('/').pop() || 'index.html';
            } catch (e) {
                // 跨域访问受限，使用当前路径
                currentPath = currentPath.split('/').pop() || 'index.html';
            }
        } else {
            currentPath = currentPath.split('/').pop() || 'index.html';
        }
        const navItems = document.querySelectorAll('.nav-item');
        
        // 移除所有激活状态
        navItems.forEach(item => {
            item.classList.remove('active');
        });
        
        // 设置当前页面的激活状态
        navItems.forEach(item => {
            const href = item.getAttribute('href');
            const page = item.getAttribute('data-page');
            
            // 根据页面类型判断
            if (page === 'index' && (currentPath === 'index.html' || currentPath === '' || currentPath === '/')) {
                item.classList.add('active');
            } else if (page === 'school' && currentPath.includes('school')) {
                item.classList.add('active');
            } else if (page === 'forum' && currentPath.includes('forum')) {
                item.classList.add('active');
            } else if (page === 'user' && currentPath.includes('user')) {
                item.classList.add('active');
            }
        });
    }
    
    // 处理导航点击事件
    function handleNavClick(event) {
        event.preventDefault();
        const href = event.currentTarget.getAttribute('href');
        
        // 如果在iframe中，尝试在父页面中跳转
        if (window.parent !== window) {
            try {
                window.parent.location.href = href;
            } catch (e) {
                // 跨域访问受限，在当前窗口中跳转
                window.location.href = href;
            }
        } else {
            window.location.href = href;
        }
    }

    // 页面加载完成后初始化
    document.addEventListener('DOMContentLoaded', function() {
        // 为所有导航项添加点击事件
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => {
            item.addEventListener('click', handleNavClick);
        });
        
        updateFooterNav();
    });
    
    // 监听父页面的路径变化
    if (window.parent !== window) {
        try {
            window.parent.addEventListener('popstate', updateFooterNav);
        } catch (e) {
            // 跨域访问受限，监听当前窗口
            window.addEventListener('popstate', updateFooterNav);
        }
    } else {
        window.addEventListener('popstate', updateFooterNav);
    }
</script>